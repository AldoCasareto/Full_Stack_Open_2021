(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(18),o=n.n(a),u=n(9),i=n(8),s=n.n(i),d=n(19),l=n(3),f=n(0),b=function(e){var t=e.search,n=e.handleFilter;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:t,onChange:n})]})},h=function(e){var t=e.notification;if(!t)return null;var n=function(){return"success"===t.status?"green":"red"},c={color:n(),background:"grey",fontSize:20,border:"solid 5px ".concat(n()),padding:10};return console.log(c),Object(f.jsx)("div",{style:c,children:t&&t.message})},j=function(e){var t=e.handleSubmit,n=e.handleNewName,c=e.handleNewNumber,r=e.newName,a=e.newNumber;return Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:r,onChange:n}),"number: ",Object(f.jsx)("input",{value:a,onChange:c})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.searchMatch,n=e.deleteContact;return Object(f.jsx)("div",{children:Object(f.jsx)("ul",{children:t.map((function(e){return Object(f.jsxs)("li",{children:[e.name,"-",e.number,Object(f.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"Delete"})]},e.id)}))})})},O=n(4),p=n.n(O),v="api/persons",x=function(){return p.a.get(v).then((function(e){return e.data}))},w=function(e){return p.a.post(v,e).then((function(e){return e.data}))},g=function(e){return p.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data}))},N=function(e,t){return p.a.put("".concat(v,"/").concat(e),t).then((function(e){return e.data}))},C=(n(44),function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(l.a)(a,2),i=o[0],O=o[1],p=Object(c.useState)(""),v=Object(l.a)(p,2),C=v[0],S=v[1],k=Object(c.useState)(""),y=Object(l.a)(k,2),T=y[0],D=y[1],L=Object(c.useState)(null),M=Object(l.a)(L,2),E=M[0],F=M[1],I=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().then((function(e){r(e),console.log(e),console.log(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){I()}),[]);var J=n.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(h,{notification:E}),Object(f.jsx)(b,{handleFilter:function(e){D(e.target.value)},search:T}),Object(f.jsx)(j,{handleNewName:function(e){O(e.target.value)},handleNewNumber:function(e){S(e.target.value)},newName:i,newNumber:C,handleSubmit:function(e){e.preventDefault();var t={name:i,number:C},c=n.find((function(e){return e.name.toLowerCase()===i.toLowerCase()}));if(c){var a=Object(u.a)(Object(u.a)({},c),{},{number:C});return window.confirm("".concat(c.name," is already added to phonebook. Replace old number with new one?")),N(c.id,a).then((function(e){return r(n.map((function(t){return t.id!==c.id?t:e})))})).then((function(){F({message:"Number updated for ".concat(i),status:"success"}),setTimeout((function(){F(null)}),5e3)})).catch((function(e){F({message:"Information for ".concat(i," has already been removed from the server"),status:"error"})})),setTimeout((function(){F(null)}),4e3),O(""),void S("")}w(t).then((function(e){r(n.concat(e)),F({message:"Added ".concat(t.name),status:"success"}),setTimeout((function(){F(null)}),4e3),O(""),S("")})).catch((function(e){return F({message:"".concat(e.response.data.error),status:"error"})})),setTimeout((function(){F(null)}),4e3)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(m,{searchMatch:J,deleteContact:function(e,t){if(window.confirm("Delete ".concat(t,"?"))){var c=n.filter((function(t){return t.id!==e}));F({message:"Deleted ".concat(t),status:"success"}),setTimeout((function(){F(null)}),4e3),g(e).then(r(c))}}})]})});o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.7988bc19.chunk.js.map